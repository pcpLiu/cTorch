\hypertarget{scheduler_8c}{}\doxysection{c\+Torch/scheduler.c File Reference}
\label{scheduler_8c}\index{cTorch/scheduler.c@{cTorch/scheduler.c}}
{\ttfamily \#include \char`\"{}c\+Torch/scheduler.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}c\+Torch/mem\+\_\+util.\+h\char`\"{}}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
Include dependency graph for scheduler.\+c\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$ \mbox{\hyperlink{scheduler_8c_a7d7f979c0d6609d8c03f65df94c7cf3a}{cth\+\_\+new\+\_\+scheduler}} (\mbox{\hyperlink{structCTHConfig}{C\+T\+H\+Config}} $\ast$config, \mbox{\hyperlink{structCTHGraph}{C\+T\+H\+Graph}} $\ast$graph)
\item 
void \mbox{\hyperlink{scheduler_8c_aec33480d0a4bec1f25d1978eef7f3c47}{cth\+\_\+search\+\_\+ready\+\_\+jobs}} (\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$scheduler, \mbox{\hyperlink{list__d_8h_aa8ec55b1eb665e3b7e7378dca481845f}{C\+T\+H\+List}}(\mbox{\hyperlink{structCTHQueueJob}{C\+T\+H\+Queue\+Job}}) $\ast$ready\+\_\+jobs)
\item 
void \mbox{\hyperlink{scheduler_8c_a6a7cfa753aeaf954eca408a159fb7c0f}{cth\+\_\+start\+\_\+scheduler\+\_\+v3}} (\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$scheduler)
\item 
void \mbox{\hyperlink{scheduler_8c_a754e7bf497de79b58bf5addd9676357d}{cth\+\_\+start\+\_\+scheduler}} (\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$scheduler)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{scheduler_8c_a7d7f979c0d6609d8c03f65df94c7cf3a}\label{scheduler_8c_a7d7f979c0d6609d8c03f65df94c7cf3a}} 
\index{scheduler.c@{scheduler.c}!cth\_new\_scheduler@{cth\_new\_scheduler}}
\index{cth\_new\_scheduler@{cth\_new\_scheduler}!scheduler.c@{scheduler.c}}
\doxysubsubsection{\texorpdfstring{cth\_new\_scheduler()}{cth\_new\_scheduler()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}}$\ast$ cth\+\_\+new\+\_\+scheduler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structCTHConfig}{C\+T\+H\+Config}} $\ast$}]{config,  }\item[{\mbox{\hyperlink{structCTHGraph}{C\+T\+H\+Graph}} $\ast$}]{graph }\end{DoxyParamCaption})}

Create a new scheduler based on config and graph. Function will parse graph\textquotesingle{}s nodes and fill into job\+\_\+list.

Arguments
\begin{DoxyItemize}
\item config\+: execution config
\item graph\+: a computation graph 
\end{DoxyItemize}Fill job\+\_\+list.

Note\+: for each node\textquotesingle{}s node\+\_\+id in this graph, scheduler will reassign them from 0 -\/ N. The queue\+\_\+status, done\+\_\+status \& ready\+\_\+status have a assumption that all nodes\textquotesingle{} node\+\_\+id are natural numbers starting from 0.\mbox{\Hypertarget{scheduler_8c_aec33480d0a4bec1f25d1978eef7f3c47}\label{scheduler_8c_aec33480d0a4bec1f25d1978eef7f3c47}} 
\index{scheduler.c@{scheduler.c}!cth\_search\_ready\_jobs@{cth\_search\_ready\_jobs}}
\index{cth\_search\_ready\_jobs@{cth\_search\_ready\_jobs}!scheduler.c@{scheduler.c}}
\doxysubsubsection{\texorpdfstring{cth\_search\_ready\_jobs()}{cth\_search\_ready\_jobs()}}
{\footnotesize\ttfamily void cth\+\_\+search\+\_\+ready\+\_\+jobs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$}]{scheduler,  }\item[{\mbox{\hyperlink{list__d_8h_aa8ec55b1eb665e3b7e7378dca481845f}{C\+T\+H\+List}}(\mbox{\hyperlink{structCTHQueueJob}{C\+T\+H\+Queue\+Job}}) $\ast$}]{ready\+\_\+jobs }\end{DoxyParamCaption})}

Search ready jobs and insert into ready\+\_\+jobs

Arguments\+:
\begin{DoxyItemize}
\item scheduler\+: scheduler
\item ready\+\_\+jobs\+: list to insert results 
\end{DoxyItemize}A queue node is ready\+:
\begin{DoxyItemize}
\item All its inbounds nodes are ready, this node is ready;
\item Or, it has no inbounds nodes
\end{DoxyItemize}\mbox{\Hypertarget{scheduler_8c_a754e7bf497de79b58bf5addd9676357d}\label{scheduler_8c_a754e7bf497de79b58bf5addd9676357d}} 
\index{scheduler.c@{scheduler.c}!cth\_start\_scheduler@{cth\_start\_scheduler}}
\index{cth\_start\_scheduler@{cth\_start\_scheduler}!scheduler.c@{scheduler.c}}
\doxysubsubsection{\texorpdfstring{cth\_start\_scheduler()}{cth\_start\_scheduler()}}
{\footnotesize\ttfamily void cth\+\_\+start\+\_\+scheduler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$}]{scheduler }\end{DoxyParamCaption})}

Turn on scheduler to put job into pipe til all jobs are done \mbox{\Hypertarget{scheduler_8c_a6a7cfa753aeaf954eca408a159fb7c0f}\label{scheduler_8c_a6a7cfa753aeaf954eca408a159fb7c0f}} 
\index{scheduler.c@{scheduler.c}!cth\_start\_scheduler\_v3@{cth\_start\_scheduler\_v3}}
\index{cth\_start\_scheduler\_v3@{cth\_start\_scheduler\_v3}!scheduler.c@{scheduler.c}}
\doxysubsubsection{\texorpdfstring{cth\_start\_scheduler\_v3()}{cth\_start\_scheduler\_v3()}}
{\footnotesize\ttfamily void cth\+\_\+start\+\_\+scheduler\+\_\+v3 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structCTHScheduler}{C\+T\+H\+Scheduler}} $\ast$}]{scheduler }\end{DoxyParamCaption})}

Scheduler main loop\+:
\begin{DoxyItemize}
\item Find ready nodes, write them into ready queue
\item Wait on nodes popping up from done queue
\item Terminate loop when all jobs done
\end{DoxyItemize}